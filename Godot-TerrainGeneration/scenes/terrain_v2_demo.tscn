[gd_scene load_steps=36 format=3 uid="uid://dxeaepbn0e70i"]

[ext_resource type="Script" uid="uid://bgpjvppda2u8x" path="res://terrain_generation/core/terrain_presenter_v2.gd" id="1_presenter"]
[ext_resource type="Resource" uid="uid://wr2k3r0ty8xg" path="res://assets/generation_resources/espa√±ita_guay.tres" id="2_oqt66"]
[ext_resource type="Script" uid="uid://c7txrbc5qk7ki" path="res://player/terrain_fly_camera.gd" id="3_camera"]
[ext_resource type="Script" uid="uid://dy56g8e3x673x" path="res://terrain_generation/debug/terrain_debug_hud.gd" id="4_hud"]
[ext_resource type="Script" uid="uid://2wt0wp5vkq0f" path="res://terrain_generation/agents/terrain_modifier_agent.gd" id="5_oqt66"]
[ext_resource type="Script" uid="uid://cx1d1s65igqbm" path="res://terrain_generation/configuration/terrain_configuration_v2.gd" id="6_4puc5"]
[ext_resource type="Script" uid="uid://cfkwjo8knjl17" path="res://terrain_generation/agents/config/mountain_agent_config.gd" id="6_b4i1g"]
[ext_resource type="Script" uid="uid://ceglbhv6gfplo" path="res://terrain_generation/agents/mountain_agent_v2.gd" id="7_ibtys"]
[ext_resource type="Script" uid="uid://d1uj11l5nqaog" path="res://terrain_generation/core/stages/sequential_modifier_stage.gd" id="8_7f1po"]
[ext_resource type="Script" uid="uid://wlx5bsak37rn" path="res://terrain_generation/props/prop_placement_rule.gd" id="9_b4i1g"]
[ext_resource type="Script" uid="uid://c5ppavb1os4er" path="res://terrain_generation/core/stages/terrain_modifier_stage.gd" id="9_spfy5"]
[ext_resource type="Resource" uid="uid://v5ie01qj4ft2" path="res://assets/generation_resources/tree_place1.tres" id="10_7f1po"]
[ext_resource type="Material" uid="uid://dmlbneowgjfqy" path="res://assets/materials/terrain_mat2.tres" id="10_oqt66"]
[ext_resource type="PackedScene" uid="uid://cq832o58evlgr" path="res://assets/models/environment/rock/rock1.tscn" id="11_215up"]
[ext_resource type="Resource" uid="uid://dmjfm4v8myli7" path="res://assets/generation_resources/rock_place1.tres" id="11_a8qn4"]
[ext_resource type="Script" uid="uid://c51qydcxes5yv" path="res://terrain_generation/chunking/strategies/grid_load_strategy_v2.gd" id="11_bqotf"]
[ext_resource type="PackedScene" uid="uid://k5n4e67sj3xd" path="res://scenes/water_plane.tscn" id="19_obh5s"]
[ext_resource type="Shader" uid="uid://cxx0puljrol3k" path="res://assets/shaders/water.gdshader" id="20_dk27i"]

[sub_resource type="Gradient" id="Gradient_obh5s"]
colors = PackedColorArray(0, 0.84705883, 0.94509804, 1, 1, 1, 1, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_dk27i"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_nmhtg"]
noise = SubResource("FastNoiseLite_dk27i")
color_ramp = SubResource("Gradient_obh5s")
seamless = true

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_00p1n"]
panorama = SubResource("NoiseTexture2D_nmhtg")

[sub_resource type="Sky" id="Sky_b6skf"]
sky_material = SubResource("PanoramaSkyMaterial_00p1n")

[sub_resource type="Environment" id="Environment_bqotf"]
background_mode = 2
sky = SubResource("Sky_b6skf")

[sub_resource type="Resource" id="Resource_4fayk"]
script = ExtResource("11_bqotf")
load_radius = 16
unload_radius = 20

[sub_resource type="FastNoiseLite" id="FastNoiseLite_oqt66"]
frequency = 0.1

[sub_resource type="Resource" id="Resource_b4i1g"]
script = ExtResource("6_b4i1g")
wedge_width = 130.0
wedge_length = 115.0
height_variation_noise = SubResource("FastNoiseLite_oqt66")
direction_change_angle = 60.0

[sub_resource type="Resource" id="Resource_ibtys"]
script = ExtResource("7_ibtys")
config = SubResource("Resource_b4i1g")
agent_name = "Mountain V2"
metadata/_custom_type_script = "uid://ceglbhv6gfplo"

[sub_resource type="Resource" id="Resource_bqotf"]
script = ExtResource("8_7f1po")
agents = Array[ExtResource("5_oqt66")]([SubResource("Resource_ibtys")])
metadata/_custom_type_script = "uid://d1uj11l5nqaog"

[sub_resource type="Resource" id="Resource_oqt66"]
script = ExtResource("6_4puc5")
heightmap_source = ExtResource("2_oqt66")
terrain_size = Vector2(1828, 1828)
height_scale = 256.0
modifier_stages = Array[ExtResource("9_spfy5")]([SubResource("Resource_bqotf")])
prop_placement_rules = Array[ExtResource("9_b4i1g")]([ExtResource("10_7f1po"), ExtResource("11_a8qn4")])
base_chunk_resolution = 1024
load_strategy = SubResource("Resource_4fayk")
max_concurrent_chunk_requests = 1
use_gpu_heightmap = true
lod_distances = Array[float]([65.0, 200.0, 250.0, 400.0])
terrain_material = ExtResource("10_oqt66")
generate_collision = false
auto_generate = false
metadata/_custom_type_script = "uid://cx1d1s65igqbm"

[sub_resource type="FastNoiseLite" id="FastNoiseLite_y0uf5"]
noise_type = 3
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_olc7i"]
noise = SubResource("FastNoiseLite_y0uf5")
seamless = true
as_normal_map = true
bump_strength = 4.0

[sub_resource type="FastNoiseLite" id="FastNoiseLite_rkbxx"]
noise_type = 3
seed = 64
frequency = 0.03
fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_ngwyd"]
noise = SubResource("FastNoiseLite_rkbxx")
seamless = true
as_normal_map = true
bump_strength = 4.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rr77w"]
render_priority = 0
shader = ExtResource("20_dk27i")
shader_parameter/albedo = Color(0, 0.32156864, 0.42352942, 1)
shader_parameter/metallic = 0.50000002375
shader_parameter/roughness = 0.02000000095
shader_parameter/texture_normal = SubResource("NoiseTexture2D_olc7i")
shader_parameter/texture_normal2 = SubResource("NoiseTexture2D_ngwyd")
shader_parameter/wave_direction = Vector2(2, 0)
shader_parameter/wave_direction2 = Vector2(0, 1)
shader_parameter/time_scale = 0.01499999966472
shader_parameter/uv_scale = 100.0

[node name="TerrainV2Demo" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_bqotf")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.052730184, 0.28951627, -0.95571953, 0.9984814, -2.3574411e-09, 0.055089504, 0.01594931, -0.957173, -0.2890767, 0, 142.29492, 0)

[node name="Terrain" type="Node3D" parent="."]
script = ExtResource("1_presenter")
configuration = SubResource("Resource_oqt66")

[node name="PropsContainer" type="Node3D" parent="Terrain"]

[node name="ChunksContainer" type="Node3D" parent="Terrain"]

[node name="FlyCamera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.8660253, 0.50000024, 0, -0.50000024, 0.8660253, -362.87543, 18.905792, 385.94843)
fov = 60.0
far = 2000.0
script = ExtResource("3_camera")

[node name="DebugHUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("4_hud")
terrain_presenter_path = NodePath("../Terrain")

[node name="WaterPlane" parent="." instance=ExtResource("19_obh5s")]
transform = Transform3D(5000, 0, 0, 0, 5000, 0, 0, 0, 5000, -4.828, 4, 4.364)
visible = false
surface_material_override/0 = SubResource("ShaderMaterial_rr77w")

[node name="Rock1" parent="." instance=ExtResource("11_215up")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -242.7028, 27.416016, 231.89688)
